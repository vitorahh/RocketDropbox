{"ast":null,"code":"module.exports = after;\n\nfunction after(count, callback, err_cb) {\n  var bail = false;\n  err_cb = err_cb || noop;\n  proxy.count = count;\n  return count === 0 ? callback() : proxy;\n\n  function proxy(err, result) {\n    if (proxy.count <= 0) {\n      throw new Error('after called too many times');\n    }\n\n    --proxy.count; // after first error, rest are passed to err_cb\n\n    if (err) {\n      bail = true;\n      callback(err); // future error callbacks will go to error handler\n\n      callback = err_cb;\n    } else if (proxy.count === 0 && !bail) {\n      callback(null, result);\n    }\n  }\n}\n\nfunction noop() {}","map":{"version":3,"sources":["C:/Users/Dominic/Documents/RocketDropbox/node_modules/after/index.js"],"names":["module","exports","after","count","callback","err_cb","bail","noop","proxy","err","result","Error"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiBC,KAAjB;;AAEA,SAASA,KAAT,CAAeC,KAAf,EAAsBC,QAAtB,EAAgCC,MAAhC,EAAwC;AACpC,MAAIC,IAAI,GAAG,KAAX;AACAD,EAAAA,MAAM,GAAGA,MAAM,IAAIE,IAAnB;AACAC,EAAAA,KAAK,CAACL,KAAN,GAAcA,KAAd;AAEA,SAAQA,KAAK,KAAK,CAAX,GAAgBC,QAAQ,EAAxB,GAA6BI,KAApC;;AAEA,WAASA,KAAT,CAAeC,GAAf,EAAoBC,MAApB,EAA4B;AACxB,QAAIF,KAAK,CAACL,KAAN,IAAe,CAAnB,EAAsB;AAClB,YAAM,IAAIQ,KAAJ,CAAU,6BAAV,CAAN;AACH;;AACD,MAAEH,KAAK,CAACL,KAAR,CAJwB,CAMxB;;AACA,QAAIM,GAAJ,EAAS;AACLH,MAAAA,IAAI,GAAG,IAAP;AACAF,MAAAA,QAAQ,CAACK,GAAD,CAAR,CAFK,CAGL;;AACAL,MAAAA,QAAQ,GAAGC,MAAX;AACH,KALD,MAKO,IAAIG,KAAK,CAACL,KAAN,KAAgB,CAAhB,IAAqB,CAACG,IAA1B,EAAgC;AACnCF,MAAAA,QAAQ,CAAC,IAAD,EAAOM,MAAP,CAAR;AACH;AACJ;AACJ;;AAED,SAASH,IAAT,GAAgB,CAAE","sourcesContent":["module.exports = after\r\n\r\nfunction after(count, callback, err_cb) {\r\n    var bail = false\r\n    err_cb = err_cb || noop\r\n    proxy.count = count\r\n\r\n    return (count === 0) ? callback() : proxy\r\n\r\n    function proxy(err, result) {\r\n        if (proxy.count <= 0) {\r\n            throw new Error('after called too many times')\r\n        }\r\n        --proxy.count\r\n\r\n        // after first error, rest are passed to err_cb\r\n        if (err) {\r\n            bail = true\r\n            callback(err)\r\n            // future error callbacks will go to error handler\r\n            callback = err_cb\r\n        } else if (proxy.count === 0 && !bail) {\r\n            callback(null, result)\r\n        }\r\n    }\r\n}\r\n\r\nfunction noop() {}\r\n"]},"metadata":{},"sourceType":"script"}